<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>うさぎ性格診断🐰</title>
<link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@500&display=swap" rel="stylesheet">
<style>
  body {
    margin: 0;
    font-family: "Zen Maru Gothic", sans-serif;
    background: linear-gradient(180deg, #fffaf5 0%, #ffe4e1 100%);
    color: #333;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }
  .container {
    flex: 1;
    padding: 1.2rem;
    max-width: 600px;
    margin: 0 auto;
  }
  h1 {
    text-align: center;
    color: #553;
  }
  .question-box {
    background: #fff;
    border-radius: 1rem;
    padding: 1rem;
    box-shadow: 0 6px 15px rgba(0,0,0,0.1);
    margin-top: 1rem;
  }
  button {
    width: 100%;
    background: #ffb6c1;
    color: #fff;
    border: none;
    border-radius: .8rem;
    padding: .7rem;
    margin-top: .6rem;
    font-size: 1rem;
    cursor: pointer;
  }
  button:hover { background: #ff8ba0; }
  .result {
    background: #fff;
    border-radius: 1rem;
    box-shadow: 0 6px 15px rgba(0,0,0,0.1);
    padding: 1.2rem;
    margin-top: 1.5rem;
    white-space: pre-line;
  }
  .bottom-nav {
    position: fixed;
    bottom: 0; left:0; right:0;
    height: 3.6rem;
    background: #fff;
    display: flex;
    justify-content: space-around;
    align-items: center;
    box-shadow: 0 -3px 10px rgba(0,0,0,0.2);
    border-top-left-radius: 1.1rem;
    border-top-right-radius: 1.1rem;
  }
  .nav-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    font-size: .6rem;
    color: #a39189;
    text-decoration: none;
  }
  .nav-item.active { color: #ff87b3; }
  .nav-item span:first-child { font-size: 1.3rem; line-height: 1.1rem; }
</style>
</head>
<body>
  <div class="container">
    <h1>🐰 うさぎ性格診断</h1>
    <div id="quiz"></div>
    <div id="result" class="result" style="display:none;"></div>
  </div>

  <nav class="bottom-nav">
    <a class="nav-item" href="index.html"><span>🏠</span><span>ホーム</span></a>
    <a class="nav-item" href="ar.html"><span>🔍</span><span>AR</span></a>
    <a class="nav-item active" href="personality.html"><span>🧬</span><span>診断</span></a>
    <a class="nav-item" href="graph.html"><span>📊</span><span>グラフ</span></a>
  </nav>

<script>
const questions = [
  {q:"飼い主が近づくと？", o:["すぐ寄ってきてあいさつする","とりあえずこちらを見る（気分次第）","見てるけど動かない／ちょっと離れる"], t:["S","Sg","Sg"]},
  {q:"ケージの外では？", o:["飼い主の近くで遊ぶ","部屋のはしで全体を観察する","最初に部屋をぐるっと見回す"], t:["S","Sg","S"]},
  {q:"知らない人が来たら？", o:["興味あって近づく","ちょっと距離をとって様子を見る","隠れる or 飼い主の影に回る"], t:["S","Sg","Sg"]},
  {q:"朝や夜はどうしてることが多い？", o:["ケージの中でも外でもよく動く","ちょっと遊んであとはまったり","だいたい寝てる・じっとしてる"], t:["A","C","C"]},
  {q:"新しいおもちゃを入れたら？", o:["すぐ近寄ってかじる・遊ぶ","においをかいでからゆっくり遊ぶ","今日はあんまり興味なし"], t:["A","C","C"]},
  {q:"掃除や部屋の模様替えをしたら？", o:["まわりをうろうろして手伝ってるつもり","少し離れて見守る","自分の安全地帯で休んでいる"], t:["A","C","C"]},
  {q:"大きな音がしたら？", o:["すぐ固まる or ぴゅっと逃げる","一応気にするけどすぐ戻る","あまり気にしないで続ける"], t:["W","W","B"]},
  {q:"はじめての場所に置かれたら？", o:["まず周りを少し見てからゆっくり進む","すぐに探検を始める","その場で周囲をじっと観察する"], t:["W","B","W"]},
  {q:"トンネルや隠れ家があったら？", o:["すぐ入って安全確認する","気分がノったときだけ入る","あってもそんなに使わない"], t:["W","B","B"]},
  {q:"なでようとすると？", o:["頭や背中を自分から出してくる","その時の気分でOKにもNGにもなる","ちょっと離れる／体を引く"], t:["L","L","I"]},
  {q:"名前を呼ぶと？", o:["来る or 近くまで様子を見にくる","顔だけ向ける／耳を向ける","ごはんの気配がある時だけ来る"], t:["L","I","I"]},
  {q:"1羽でいるときは？", o:["飼い主のことをちらちら見てる","毛づくろいしたり寝たりでマイペース","ぬいぐるみやタオルをなめる・寄りかかる"], t:["L","I","L"]}
];

const typeData = {
  "S-A-B-L":["🌞 アクティブラブリータイプ","人懐っこくて元気！遊びと人が大好きな陽気うさぎ。運動が足りないと少しわがままモードになるので、毎日のふれあいを大事にしてね。"],
  "S-A-B-I":["💪 リーダーうさタイプ","冒険心旺盛で“みんな俺に任せろ”タイプ。先頭で走るけど、飼い主をちゃんと確認してるリーダー肌。"],
  "S-A-W-L":["💗 ピュアハートタイプ","人も環境も大好きだけど、刺激が強いと少し不安になりがち。優しく声をかけて安心感を与えると一気に甘えモードに。"],
  "S-A-W-I":["⚡ ツンデレアクティブタイプ","甘えたいけど気まぐれ。なでたいときは“本人から来たタイミング”を逃さないのがコツ。"],
  "S-C-B-L":["🍀 おだやかプリンセスタイプ","落ち着きがあって上品。マイペースで穏やかな空気を作る癒し系。おやつタイムがルーティン。"],
  "S-C-B-I":["🧘‍♀️ クールケアタイプ","人のことをよく見ていて、静かに寄り添う大人タイプ。ベタベタよりそっと一緒に過ごすのが◎。"],
  "S-C-W-L":["🫖 ナイーブスイートタイプ","優しいけれど音や匂いに敏感。静かな環境が一番の幸せ。なでるとすぐうっとり顔になる。"],
  "S-C-W-I":["🕊 シャイチャームタイプ","繊細で奥ゆかしい子。信頼した人にだけ見せる甘え顔が最高のご褒美。"],
  "Sg-A-B-L":["🐾 ソロハンタータイプ","ひとり遊びが上手な自由人うさぎ。放っておいても楽しそう。でも、見守られてるとちょっと安心。"],
  "Sg-A-B-I":["🔥 ワイルドアドベンチャータイプ","好奇心MAXの探検家。外に出るとテンション上がる！だけど撫でられるより走りたい派。"],
  "Sg-C-W-L":["🌙 マイペースヒーラータイプ","静かで穏やか、ゆっくりとした時間が好き。飼い主の気分を察してそばに来る優しい子。"],
  "Sg-C-W-I":["🪶 ひとりごと哲学者タイプ","観察好きで慎重派。静かな隅っこが安心。自分から来た日は思いっきり褒めてあげよう。"]
};

let answers = [];
let qIndex = 0;
const quiz = document.getElementById("quiz");
const result = document.getElementById("result");

function showQuestion(){
  if(qIndex >= questions.length){ showResult(); return; }
  const q = questions[qIndex];
  quiz.innerHTML = `
    <div class="question-box">
      <p><b>Q${qIndex+1}.</b> ${q.q}</p>
      ${q.o.map((opt,i)=>`<button onclick="choose('${q.t[i]}')">${opt}</button>`).join('')}
    </div>
  `;
}

function choose(v){
  answers.push(v);
  qIndex++;
  showQuestion();
}

function showResult(){
  const count = {S:0,Sg:0,A:0,C:0,B:0,W:0,I:0,L:0};
  answers.forEach(v=>count[v]++);
  const keys = [
    count.S>=count.Sg?"S":"Sg",
    count.A>=count.C?"A":"C",
    count.B>=count.W?"B":"W",
    count.I>=count.L?"I":"L"
  ];
  const code = keys.join("-");
  const info = typeData[code] || ["🐰 バランスタイプ", "特徴がほどよく混ざったマイペースなうさぎ。"];
  quiz.style.display="none";
  result.style.display="block";
  result.innerHTML = `<h2>${info[0]}</h2><p>${info[1]}</p><br><button onclick="restart()">もう一度診断する</button>`;
}

function restart(){
  answers = [];
  qIndex = 0;
  quiz.style.display="block";
  result.style.display="none";
  showQuestion();
}

showQuestion();
</script>
</body>
</html>
